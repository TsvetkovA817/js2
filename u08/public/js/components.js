(()=>{var t={338:()=>{Vue.component("cart",{data:()=>({cartItems:[],showCart:!1,sumCart:0,qntCart:0}),mounted(){this.$parent.getJson("/api/cart").then((t=>{for(let r of t.contents)this.$data.cartItems.push(r);this.sump()}))},methods:{addProduct(t){let r=this.cartItems.find((r=>r.id_product===t.id_product));if(r)this.$parent.putJson(`/api/cart/${r.id_product}`,{quantity:1}).then((t=>{1===t.result&&(r.quantity++,this.sump())}));else{const r=Object.assign({quantity:1},t);this.$parent.postJson("/api/cart",r).then((t=>{1===t.result&&(this.cartItems.push(r),this.sump())}))}},delp(t){t.quantity>1?this.$parent.putJson(`/api/cart/${t.id_product}`,{quantity:-1}).then((r=>{r.result&&(t.quantity--,this.sump())})):this.$parent.delJson(`/api/cart/${t.id_product}`,t).then((r=>{r.result?(this.cartItems.splice(this.cartItems.indexOf(t),1),this.sump()):console.log("error del")}))},sump(){for(el of(this.sumCart=0,this.qntCart=0,this.$data.cartItems))this.sumCart=this.sumCart+el.price*el.quantity,this.qntCart+=el.quantity}},template:'<div>\n            \n           <div class="menu_cart pulse">\n                <img src="img/cart.svg" alt="cart" @click="showCart = !showCart">\n                <p class="menu_cart_count">5</p>\n           </div>\n\n            <div class="cart_card" v-show="showCart">\n              <div class="cart_card__container" v-show="showCart">\n                <h3>Корзина</h3>\n                <p v-if="!cartItems.length"  class="cart_card__empty">Пустая корзинка</p>\n                <cart-item v-for="item of cartItems" :key="item.id_product" :img="item.imgCart" :cart-item="item" @delp="delp">\n                </cart-item>\n                <hr>\n                <p class="cart_card__itog">Итого:</p>\n                <p>Кол-во: {{ qntCart }} шт.</p>\n                <p class="cart_card__summ">Сумма: {{ sumCart }} руб.</p>\n               </div> \n            </div>\n        </div>\n    '}),Vue.component("cart-item",{props:["img","cartItem"],template:'\n    <div class="cart_card_product">\n\n                    <div class="cart_card_product__img">\n                        <img :src="img" alt="Some img">\n                    </div>    \n                    <div class="cart_card_product__info">\n                            <div class="product-title">{{ cartItem.product_name }}</div>\n                            <div class="product-quantity">Кол-во: {{ cartItem.quantity }}</div>\n                            <div class="product-single-price">$ {{ cartItem.price }} each</div>\n                    </div>\n                    \n                    <div class="cart_card_product__right">\n                        <div class="product-price">Сумма: {{cartItem.quantity*cartItem.price}}</div>\n                        <button class="del-btn" @click="$emit(\'delp\', cartItem)">&times;</button>\n                    </div>\n\n    </div>\n\n\n    '})},388:()=>{Vue.component("error",{data:()=>({text:""}),computed:{isVisible(){return""!==this.text}},template:'\n    <div class="error-block" v-if="isVisible">\n        <p class="error-msg">\n        <button class="close-btn" @click="text=\'\'">&times;</button>\n        {{ text }}\n</p>\n</div>\n    '})},832:()=>{Vue.component("filterel",{data:()=>({userSearch:""}),template:'\n    \n    <form action="#" class="search-form" @submit.prevent="$parent.$refs.products.filter(userSearch)">\n                <input type="text" class="search-field" v-model="userSearch">\n                <button type="submit" class="btn-search">\n                    <img class="menu_img_search" src="img/search.svg" alt="search">\n                </button>\n            </form>\n    \n    '})},988:()=>{Vue.component("products",{data:()=>({catalogUrl:"/catalogData.json",filtered:[],products:[]}),mounted(){this.$parent.getJson("/api/products").then((t=>{for(let r of t)this.$data.products.push(r),this.$data.filtered.push(r)}))},methods:{filter(t){let r=new RegExp(t,"i");this.filtered=this.products.filter((e=>r.test(e.product_name)||r.test(e.product_cn)||e.price==t||r.test(e.desc)))}},template:'<div class="cards">\n                <product v-for="item of filtered" \n                    :key="item.id_product" \n                    :img="item.imgProduct"\n                    :product="item">\n                </product>\n               </div>'}),Vue.component("product",{props:["product","img"],template:'\n            <div class="card">\n            <div class="cardImg">\n                <img :src="img" alt="Some img">\n                <div class="cardImgBuy">\n                    <button @click="$root.$refs.cart.addProduct(product)">\n                        <img src="./img/cart.svg" alt="cart">\n                        Add to Cart\n                    </button>\n                </div>\n            </div>\n            <div class="card_txt">\n                <h4 class="card_h4"><a href="product.html">{{product.product_name}} / {{product.product_cn}}</a></h4>\n                <p class="card_p"><a href="product.html">{{product.desc}}</a></p>\n                <p class="card_price">$ {{product.price}} </p>\n            </div>\n            </div>\n    '})}},r={};function e(a){var s=r[a];if(void 0!==s)return s.exports;var c=r[a]={exports:{}};return t[a](c,c.exports,e),c.exports}e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},e.d=(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),(()=>{"use strict";var t=e(338),r=e.n(t),a=e(988),s=e.n(a),c=e(388),n=e.n(c),i=e(832),d=e.n(i);r(),s(),n(),d()})()})();